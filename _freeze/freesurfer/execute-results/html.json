{
  "hash": "0b036e3bb4bade113ab0cad5ab30703f",
  "result": {
    "engine": "knitr",
    "markdown": "---\nformat:\n  html:\n    df-print: tibble\n---\n\n\n\n\n\n# FreeSurfer Measures {#sec-freesurfer}\n\n## Before Proposing Project\n\n### Confirm Sample Size\n\nNot all participants in a release have imaging, and not all MRIs are of good quality. Before proposing a project, please confirm that a release will have a large enough sample size. Release 2.0 has 996 participants with for which FreeSurfer data have been extracted. \n\n## Starting Project\n\n### Locate data\n\nIn the release folder, data are stored underneath the `mris/derivatives` folder:\n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\n/corral-secure/projects/A2CPS/products/consortium-data/pre-surgery/mris/derivatives/freesurfer\n```\n:::\n\n\n\n\n\nThis folder contains all of the FreeSurfer outputs for every participant (e.g., this is the directory that could correspond to the FreeSurfer environment variable `$SUBJECTS_DIR`), which subject folders of the form `sub-[recordid]_ses-[protocolid]`.\n\nMost users will not need the raw FreeSurfer outputs and can instead rely on tables in which the morphological measures have been aggregated. There are three relevant tables\n\n- aparc.tsv has the outputs of https://surfer.nmr.mgh.harvard.edu/fswiki/aparcstats2table (this is measurements derived from parcellations of the cortical surface, like cortical thickness)\n- aseg.tsv has the outputs of https://surfer.nmr.mgh.harvard.edu/fswiki/asegstats2table (that is, measurements derived from segmentations of the 3d structural image, like regional gray matter volumes)\n- headers.tsv has some other information about the brain as a whole (e.g., estimated Total Intracranial Volume)\n\nFor each of these, there are data dictionaries that details the contents (e.g., aparc.json explains the columns of aparc.tsv). \n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\n$ ls /corral-secure/projects/A2CPS/products/consortium-data/pre-surgery/mris/derivatives/freesurfer/*{json,tsv}\n/corral-secure/projects/A2CPS/products/consortium-data/pre-surgery/mris/derivatives/freesurfer/aparc.json  /corral-secure/projects/A2CPS/products/consortium-data/pre-surgery/mris/derivatives/freesurfer/gm_morph.tsv\n/corral-secure/projects/A2CPS/products/consortium-data/pre-surgery/mris/derivatives/freesurfer/aparc.tsv   /corral-secure/projects/A2CPS/products/consortium-data/pre-surgery/mris/derivatives/freesurfer/headers.json\n/corral-secure/projects/A2CPS/products/consortium-data/pre-surgery/mris/derivatives/freesurfer/aseg.json   /corral-secure/projects/A2CPS/products/consortium-data/pre-surgery/mris/derivatives/freesurfer/headers.tsv\n/corral-secure/projects/A2CPS/products/consortium-data/pre-surgery/mris/derivatives/freesurfer/aseg.tsv\n```\n:::\n\n\n\n\n\n\n### Extract data\n\nIn this kit, we will consider the cortical surface measurements, stored within `aparc.tsv`. This table contains nine regional measurements for the various structures that compose each of six parcellations.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreadr::read_tsv(\"data/aparc.tsv\", show_col_types = FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 399,992 × 14\n   StructName       NumVert SurfArea GrayVol ThickAvg ThickStd MeanCurv GausCurv\n   <chr>              <dbl>    <dbl>   <dbl>    <dbl>    <dbl>    <dbl>    <dbl>\n 1 bankssts            1360      909    2055     2.52    0.397    0.112    0.02 \n 2 caudalanteriorc…     852      604    1626     2.25    0.887    0.131    0.024\n 3 caudalmiddlefro…    2870     1857    4018     2.16    0.485    0.104    0.018\n 4 cuneus              1595     1090    2019     1.74    0.515    0.141    0.027\n 5 entorhinal           480      306    1366     3.03    0.816    0.105    0.018\n 6 fusiform            3434     2414    8326     2.91    0.603    0.123    0.023\n 7 inferiorparietal    4984     3387    7491     2.06    0.508    0.122    0.022\n 8 inferiortemporal    3816     2614    8405     2.79    0.552    0.118    0.021\n 9 isthmuscingulate    1167      782    1820     2.14    0.832    0.117    0.021\n10 lateraloccipital    6159     4023    8578     2.02    0.536    0.132    0.027\n# ℹ 399,982 more rows\n# ℹ 6 more variables: FoldInd <dbl>, CurvInd <dbl>, sub <dbl>, ses <chr>,\n#   hemisphere <chr>, parc <chr>\n```\n\n\n:::\n:::\n\n\n\n\n\n\nA typical analysis will only rely on one parcellation. For details of the different parcellations, see the [FreeSurfer documentation](https://surfer.nmr.mgh.harvard.edu/fswiki/CorticalParcellation). Two good starting choices are either the `aparc` or `aparc.a2009s` atlas. \n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreadr::read_tsv(\"data/aparc.tsv\", show_col_types = FALSE) |>\n  dplyr::filter(parc == \"aparc.a2009s\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 147,258 × 14\n   StructName       NumVert SurfArea GrayVol ThickAvg ThickStd MeanCurv GausCurv\n   <chr>              <dbl>    <dbl>   <dbl>    <dbl>    <dbl>    <dbl>    <dbl>\n 1 G_and_S_frontom…     828      603    1341     2.10    0.476    0.131    0.026\n 2 G_and_S_occipit…    1116      762    2218     2.47    0.643    0.127    0.025\n 3 G_and_S_paracen…    1548      858    1810     1.89    0.58     0.097    0.019\n 4 G_and_S_subcent…    1151      809    2142     2.44    0.413    0.129    0.021\n 5 G_and_S_transv_…     531      480    1424     2.38    0.585    0.203    0.052\n 6 G_and_S_cingul-…    2005     1481    3804     2.46    0.531    0.14     0.028\n 7 G_and_S_cingul-…    1183      840    2115     2.44    0.618    0.118    0.021\n 8 G_and_S_cingul-…    1222      851    2125     2.53    0.527    0.128    0.03 \n 9 G_cingul-Post-d…     430      310    1028     2.53    0.658    0.15     0.026\n10 G_cingul-Post-v…     234      152     460     2.52    0.968    0.119    0.025\n# ℹ 147,248 more rows\n# ℹ 6 more variables: FoldInd <dbl>, CurvInd <dbl>, sub <dbl>, ses <chr>,\n#   hemisphere <chr>, parc <chr>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n## Considerations While Working on the Project\n\n### Variability Across Scanners\n\nMany MRI biomarkers exhibit variability across the scanners, which may confound some analyses. The imaging DIRC is quantifying and mitigating this variability. For an ongoing review of the issue, please see https://a2cps.atlassian.net/wiki/spaces/DOC/pages/176619539/Imaging+Harmonization. \n\n### Data Quality\n\nAs with any MRI derivative, all pipeline derivatives have been included. This means that products were included regardless of their quality, and so some products are known to have poor quality--rated \"red\" or incomparable. For details on the ratings and how to exclude them, see [bids-qc-joining](bids-qc-joining.qmd).\n\nCurrently, no QC has been performed on the underlying segmentations and parcellations. With adequate sample sizes, results based on whole-atlas FreeSurfer measurements are generally robust, although there are individual regions that may warrant close inspection (e.g., [McCarthy et al. 2015](http://dx.doi.org/10.3389/fnins.2015.00379), [Vahermaa et al. 2023](https://doi.org/10.1016/j.neuroimage.2023.120306)). Moreover, it remains unclear the extent to which FreeSurfer's accuracy persists over the wide range of demographics found in the A2CPS dataset. The Imaging DIRC is actively exploring these aspects of quality. \n\n### Methods\n\nFreeSurfer outputs were generated by the fMRIPrep pipeline (https://fmriprep.org/en/stable/workflows.html#surface-preprocessing). The fMRIPrep pipeline is similar to a typical call to FreeSurfer's `recon-all`, with a majority of changes aiming to parallelize more parts of `recon-all`. However, there are differences, such as in how the brain is masked. The A2CPS use of fMRIPrep is even more different because it entails replacing the fMRIPrep masking procedure with [`SynthStrip`](https://surfer.nmr.mgh.harvard.edu/docs/synthstrip/). In general, these changes are expected to only improve the quality of the FreeSurfer outputs. However, they may hinder some comparisons between results derived from A2CPS and those in other studies.\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}